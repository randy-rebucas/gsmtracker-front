<div *ngIf="isLoading" class="loading">
    <mat-spinner [diameter]="50"></mat-spinner>
</div>
<form [formGroup]="form" class="repair-form" (submit)="onSave()" *ngIf="!isLoading">
    <h2>Repair form (Job Order)</h2>
    <mat-tab-group class="custom-tabs">
        <mat-tab>
            <ng-template mat-tab-label>
                <!-- <span class="material-icons">
                    person_outline
                    </span> -->
                <mat-icon class="material-icons">person_outline</mat-icon>
                Customer Detail
            </ng-template>
            <div *ngIf="selectedCustomerId; then thenCustomer else elseCustomer"></div>
            <ng-template #thenCustomer>
                {{selectedCustomerId}}
            </ng-template>
            <ng-template #elseCustomer>
                <div class="customer-option">
                    <button mat-fab color="primary" aria-label="Customer Lookup">
                        <mat-icon>search</mat-icon>
                      </button>
                    <p>or</p>
                    <button mat-stroked-button><mat-icon>add</mat-icon> Add new Customer</button>
                </div>
            </ng-template>
        </mat-tab>

        <mat-tab>
            <ng-template mat-tab-label>
                <mat-icon class="material-icons">fact_check</mat-icon>
                Unit/Complaint Detail
            </ng-template>
            <div class="form-field-block">
                <mat-form-field appearance="outline">
                    <mat-label>{{ 'mobiles.brand' | translate }}</mat-label>
                    <input matInput formControlName="brand" uppercase>
                    <mat-error *ngIf="formCtrls.brand.errors">
                        <div *ngIf="formCtrls.brand.errors.required">
                            {{ 'validation.required' | translate:{'s':'brand'} }}
                        </div>
                        <div *ngIf="formCtrls.brand.errors.maxlength">
                            {{ 'validation.maxLength' | translate:{'s':'30', 'ctrl': 'brand'} }}
                        </div>
                    </mat-error>
                </mat-form-field>
                <mat-form-field appearance="outline">
                    <mat-label>{{ 'mobiles.serial-number' | translate }}</mat-label>
                    <input matInput formControlName="serialNumber">
                    <mat-error *ngIf="formCtrls.serialNumber.errors">
                        <div *ngIf="formCtrls.serialNumber.errors.required">
                            {{ 'validation.required' | translate:{'s':'serialNumber'} }}
                        </div>
                        <div *ngIf="formCtrls.serialNumber.errors.maxlength">
                            {{ 'validation.maxLength' | translate:{'s':'30', 'ctrl': 'serialNumber'} }}
                        </div>
                    </mat-error>
                </mat-form-field>
            </div>
            <div class="form-field-block">
                <mat-form-field appearance="outline">
                    <mat-label>{{ 'mobiles.model' | translate }}</mat-label>
                    <input matInput formControlName="model" uppercase>
                    <mat-error *ngIf="formCtrls.model.errors">
                        <div *ngIf="formCtrls.model.errors.required">
                            {{ 'validation.required' | translate:{'s':'model'} }}
                        </div>
                        <div *ngIf="formCtrls.model.errors.maxlength">
                            {{ 'validation.maxLength' | translate:{'s':'30', 'ctrl': 'model'} }}
                        </div>
                    </mat-error>
                </mat-form-field>
                <mat-form-field appearance="outline">
                    <mat-label>{{ 'mobiles.other' | translate }}</mat-label>
                    <input matInput formControlName="other">
                    <mat-error *ngIf="formCtrls.other.errors">
                        <div *ngIf="formCtrls.other.errors.required">
                            {{ 'validation.required' | translate:{'s':'other'} }}
                        </div>
                        <div *ngIf="formCtrls.other.errors.maxlength">
                            {{ 'validation.maxLength' | translate:{'s':'150', 'ctrl': 'other'} }}
                        </div>
                    </mat-error>
                </mat-form-field>
            </div>
            <mat-form-field appearance="outline">
                <mat-label>Complaint</mat-label>
                <textarea formControlName="chiefCompliant" matInput rows="5" placeholder=""></textarea>
                <mat-error *ngIf="formCtrls.chiefCompliant.errors">
                    <div *ngIf="formCtrls.chiefCompliant.errors.required">
                        {{ 'validation.required' | translate:{'s':'chief complain'} }}
                    </div>
                    <div *ngIf="formCtrls.chiefCompliant.errors.maxlength">
                        {{ 'validation.maxLength' | translate:{'s':'3000', 'ctrl': 'chief complain'} }}
                    </div>
                </mat-error>
            </mat-form-field>
        </mat-tab>
        <mat-tab>
            <ng-template mat-tab-label>
                <mat-icon class="material-icons">read_more</mat-icon>
                Job Detail
            </ng-template>
            <mat-form-field appearance="outline">
                <mat-label>Action Taken</mat-label>
                <textarea formControlName="actionTaken" matInput rows="5" placeholder=""></textarea>
                <mat-error *ngIf="formCtrls.actionTaken.errors">
                    <div *ngIf="formCtrls.actionTaken.errors.required">
                        {{ 'validation.required' | translate:{'s':'action taken'} }}
                    </div>
                    <div *ngIf="formCtrls.actionTaken.errors.maxlength">
                        {{ 'validation.maxLength' | translate:{'s':'3000', 'ctrl': 'action taken'} }}
                    </div>
                </mat-error>
            </mat-form-field>

            <div class="form-field-block">
                <mat-form-field appearance="outline">
                    <mat-label>{{ 'repairs.warranty' | translate }}</mat-label>
                    <input matInput formControlName="warranty" uppercase>
                    <mat-error *ngIf="formCtrls.warranty.errors">
                        <div *ngIf="formCtrls.warranty.errors.required">
                            {{ 'validation.required' | translate:{'s':'warranty'} }}
                        </div>
                        <div *ngIf="formCtrls.warranty.errors.maxlength">
                            {{ 'validation.maxLength' | translate:{'s':'30', 'ctrl': 'warranty'} }}
                        </div>
                    </mat-error>
                </mat-form-field>
                <mat-form-field appearance="outline">
                    <mat-label>{{ 'technicians.technician' | translate }}</mat-label>
                    <input matInput formControlName="technician">
                    <mat-error *ngIf="formCtrls.technician.errors">
                        <div *ngIf="formCtrls.technician.errors.required">
                            {{ 'validation.required' | translate:{'s':'technician'} }}
                        </div>
                        <div *ngIf="formCtrls.technician.errors.maxlength">
                            {{ 'validation.maxLength' | translate:{'s':'30', 'ctrl': 'technician'} }}
                        </div>
                    </mat-error>
                </mat-form-field>
                <mat-form-field appearance="outline">
                    <mat-label>{{ 'repairs.amount-paid' | translate }}</mat-label>
                    <input matInput formControlName="amountPaid">
                    <mat-error *ngIf="formCtrls.amountPaid.errors">
                        <div *ngIf="formCtrls.amountPaid.errors.required">
                            {{ 'validation.required' | translate:{'s':'amount paid'} }}
                        </div>
                        <div *ngIf="formCtrls.amountPaid.errors.maxlength">
                            {{ 'validation.maxLength' | translate:{'s':'6', 'ctrl': 'amount paid'} }}
                        </div>
                    </mat-error>
                </mat-form-field>
            </div>
            <button type="submit" mat-raised-button color="primary" cdkFocusInitial>Submit</button>
        </mat-tab>
    </mat-tab-group>

</form>