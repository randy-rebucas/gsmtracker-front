<div
  gdAreas="header header | side content | footer footer"
  gdGap="16px"
  gdRows="auto auto auto"
  gdColumns="300px auto"
  gdAreas.lt-md="header | side | content | footer"
  gdRows.lt-md="auto auto auto auto"
  gdColumns.lt-md="auto">
  <div class="area header" gdArea="header">
      <div class="action-button">
          <button class="mat-raised-button mat-accent" (click)="onCancelVisit(patientId)">Cancel Visit</button>
      </div>
  </div>
  <div class="area side" gdArea="side">
      <div fxLayout='row wrap' fxLayoutGap="10px">
          <div fxFlex="100%" fxFlex.xs="100%"  fxFlex.sm="47.9%" fxFlex.md="100%" class="fxRecord">
            <div style="min-height: 184px;">
              <div *ngIf="isLoading" class="loading">
                  <mat-spinner [diameter]="25"></mat-spinner>
              </div>
              <div *ngIf="!isLoading">
                  <form [formGroup]="profileForm" (submit)="onSavePicture()">
                    <input style="display: none" type="file" (change)="onFileChanged($event)" #filePicker>
                    <div class="image-preview">
                      <button mat-icon-button type="button" color="primary" (click)="filePicker.click()" aria-label="Change Profile Picture">
                          <mat-icon>create</mat-icon>
                      </button>
                      <div *ngIf="avatar; then thenBlock else elseBlock"></div>
                      <ng-template #thenBlock>
                          <img [src]="avatar" alt="{{firstname + ' ' + midlename + ' ' + lastname}}" style="width: 180px;" />
                      </ng-template>
                      <ng-template #elseBlock>
                          <img src="assets/images/blank.png" alt="{{firstname + ' ' + midlename + ' ' + lastname}}" style="width: 180px;" />
                      </ng-template>
                    </div>
                </form>
              </div>
            </div>
          </div>
          <div fxFlex="100%" fxFlex.xs="100%"  fxFlex.sm="47.9%" fxFlex.md="100%" class="fxRecord">
            <div style="min-height: 158px;">
              <div *ngIf="isLoading" class="loading">
                  <mat-spinner [diameter]="25"></mat-spinner>
              </div>
              <div *ngIf="!isLoading">
                  <h2 class="mat-h2">{{firstname + ' ' + midlename + ' ' + lastname}} </h2>
                  <h4 class="mat-h4">Created: {{created | date:'medium'}}</h4>
                  <mat-list-item dense *ngFor="let address of addresses; let i = index;" class="address">
                      <ng-container *ngIf="address.current">
                          <span id="current" title="current">&nbsp;</span>
                      </ng-container>
                      <mat-list-item > {{address.address1}} </mat-list-item>
                      <ng-container *ngIf="address.address2">
                          <mat-list-item>{{address.address2}}</mat-list-item>
                      </ng-container>
                      <mat-list-item> {{address.postalCode}} {{address.province}}, {{address.city}} </mat-list-item>
                      <mat-list-item> {{address.country}} </mat-list-item>
                      <mat-divider></mat-divider>
                  </mat-list-item>
                  <mat-list-item dense>
                      <mat-list-item>Contact: {{contact}} </mat-list-item>
                      <mat-list-item>Email: <a href="mailto:{{email}}">{{email}}</a> </mat-list-item>
                      <mat-list-item>Gender: {{gender}} </mat-list-item>
                      <mat-list-item>Birthdate: {{birthdate | date}} </mat-list-item>
                      <mat-divider></mat-divider>
                  </mat-list-item>
                  <mat-list-item dense *ngIf="metas.length != 0">
                    <p>Meta Data</p>
                      <mat-list-item *ngFor="let meta of metas; let m = index;">
                        {{meta.label}}: {{meta.value}}
                      </mat-list-item>
                      <mat-divider></mat-divider>
                  </mat-list-item>
              </div>
            </div>
          </div>
          <div fxFlex="100%" fxFlex.xs="100%"  fxFlex.sm="47.9%" fxFlex.md="100%" class="fxRecord">
            <div>
              Quick Actions
              <mat-list>
                  <mat-list-item [routerLink]="['/messages']"><i class="material-icons">
                          message
                          </i> &nbsp; Message </mat-list-item>
                  <mat-list-item [routerLink]="['/appointments']"><i class="material-icons">
                      calendar_today
                      </i> &nbsp; Appointment </mat-list-item>
                  <mat-list-item (click)="viewChart(patientId)"><i class="material-icons">
                    remove_red_eye
                          </i> &nbsp; View Chart </mat-list-item>
                  <mat-list-item (click)="generateQrCode(patientId)"><i class="material-icons">
                          fingerprint
                          </i> &nbsp; Generate QR Code </mat-list-item>
                  <!-- <mat-list-item (click)="addToNetwork(personId)"><i class="material-icons">
                          group
                                  </i> &nbsp; Network Request </mat-list-item> -->
              </mat-list>

            </div>
          </div>
      </div>
  </div>
  <div class="area content" gdArea="content">
      <nav mat-tab-nav-bar>
          <a mat-tab-link routerLink="./chief-complaints" routerLinkActive #rlaChiefComplaint="routerLinkActive" [active]="rlaChiefComplaint.isActive">Chief complaints</a>
          <a mat-tab-link routerLink="./histories" routerLinkActive #rlaHistories="routerLinkActive" [active]="rlaHistories.isActive">Histories</a>
          <a mat-tab-link routerLink="./physical-exams" routerLinkActive #rlaPhysicalExams="routerLinkActive" [active]="rlaPhysicalExams.isActive">Physical exams</a>
          <a mat-tab-link routerLink="./orders" routerLinkActive #rlaOrders="routerLinkActive" [active]="rlaOrders.isActive">Orders</a>
          <a mat-tab-link routerLink="./prescriptions" routerLinkActive #rlaPrescriptions="routerLinkActive" [active]="rlaPrescriptions.isActive">Prescriptions</a>
          <a mat-tab-link routerLink="./test-results" routerLinkActive #rlaTestResult="routerLinkActive" [active]="rlaTestResult.isActive">Test Results</a>
          <a mat-tab-link routerLink="./progress-notes" routerLinkActive #rlaProgressNotes="routerLinkActive" [active]="rlaProgressNotes.isActive">Progress Notes</a>
          <a mat-tab-link routerLink="./assessments" routerLinkActive #rlaAssessments="routerLinkActive" [active]="rlaAssessments.isActive">Assessments</a>
      </nav>
      <div style="margin-top: 1em;">
        <router-outlet></router-outlet>
      </div>

  </div>
  <div class="area footer" gdArea="footer">
    <!-- Footer -->
  </div>
</div>
