<div class="field-wrapper">
    <form [formGroup]="form" class="normal-form" (submit)="onSaveGenSetting()">
        <table>
            <tr>
                <td>
                    <mat-form-field>
                        <input matInput type="text" formControlName="clinicName" placeholder="Clinic Name">
                    </mat-form-field>
                </td>
                <td colspan="2">
                    <mat-form-field>
                        <input matInput type="text" formControlName="clinicOwner" placeholder="Clinic Owner">
                    </mat-form-field>
                </td>
            </tr>
            <tr>
                <td colspan="3">
                    <mat-form-field>
                        <textarea matInput formControlName="clinicAddress" rows="4" placeholder="Clinic Address"></textarea>
                    </mat-form-field>
                </td>
            </tr>
            <tr>
                <td colspan="3">
                    <mat-form-field>
                        <input matInput type="text" formControlName="clinicEmail" placeholder="Clinic Email">
                    </mat-form-field>
                </td>
            </tr>
            <tr>
                <td>
                    <mat-form-field>
                        <input matInput type="text" formControlName="prc" placeholder="PRC">
                    </mat-form-field>
                </td>
                <td>
                    <mat-form-field>
                        <input matInput type="text" formControlName="ptr" placeholder="PTR">
                    </mat-form-field>
                </td>
                <td>
                    <mat-form-field>
                        <input matInput type="text" formControlName="s2" placeholder="S2">
                    </mat-form-field>
                </td>
            </tr>

            <ng-container formArrayName="clinicPhone" *ngIf="contactArray.length > 0">
                <tr *ngFor="let contact of contactArray.controls; let i = index;" [formGroupName]="i">
                    <td colspan="2" class="contact-{{i}}">
                        <mat-form-field>
                            <input matInput type="text" formControlName="contact" placeholder="Contact {{i+1}}">
                        </mat-form-field>
                    </td>
                    <td>
                        <button mat-icon-button *ngIf="contactArray.controls.length < 3" (click)="addContact()" type="button"><mat-icon>add</mat-icon></button>
                        <!-- row delete button, hidden if there is just one row -->
                        <button mat-icon-button color="warn" *ngIf="contactArray.controls.length > 1" (click)="removeContact(i)" type="button"><mat-icon>delete_outline</mat-icon></button>
                    </td>
                </tr>
            </ng-container>

            <tr>
                <td>Morning (open)</td>
                <td>Afternoon (close)</td>
                <td></td>
            </tr>
            <ng-container formArrayName="clinicHours">
                <tr *ngFor="let hour of hourArray.controls; let i = index;" [formGroupName]="i">
                    <td>
                        <mat-form-field>
                            <input matInput type="text" [ngxTimepicker]="morningopenpicker" formControlName="morningOpen" placeholder="opening hour" [disableClick]="true" readonly>
                            <ngx-material-timepicker-toggle [for]="morningopenpicker"></ngx-material-timepicker-toggle>
                            <ngx-material-timepicker #morningopenpicker></ngx-material-timepicker>
                        </mat-form-field>
                    </td>
                    <td>
                        <mat-form-field>
                            <input matInput type="text" [ngxTimepicker]="afternoonclosepicker" formControlName="afternoonClose" placeholder="closing hour" [disableClick]="true" readonly>
                            <ngx-material-timepicker-toggle [for]="afternoonclosepicker"></ngx-material-timepicker-toggle>
                            <ngx-material-timepicker #afternoonclosepicker></ngx-material-timepicker>
                        </mat-form-field>
                    </td>
                    <td>
                        <button mat-icon-button *ngIf="hourArray.controls.length < 3" (click)="addHour()" type="button"><mat-icon>add</mat-icon></button>
                        <button mat-icon-button color="warn" *ngIf="hourArray.controls.length > 1" (click)="removeHour(i)" type="button"><mat-icon>delete_outline</mat-icon></button>
                    </td>
                </tr>
            </ng-container>
            <tr>
                <td>
                    <mat-checkbox formControlName="nobreak"> No Noon Break </mat-checkbox>
                </td>
            </tr>
        </table>
        <br/>
        <br/>
        <button mat-raised-button color="primary" type="submit">Update</button>
    </form>
</div>